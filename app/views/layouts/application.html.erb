<!DOCTYPE html>
<html>
  <head>
    <title>RailsPhotoStore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%= javascript_pack_tag 'application' %>
    <link rel="stylesheet" type='text/css' href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css"/>
    <link rel='stylesheet' type='text/css' href='https://unpkg.com/purecss@2.0.5/build/pure-min.css'/>
    <link rel='stylesheet' type='text/css' href='https://unpkg.com/purecss@2.0.5/build/grids-responsive-min.css'/>
  </head>

  <body>
    <div hidden id="snipcart" data-api-key=<%= snipcart_api_key %> data-config-modal-style="side"></div>
    <% if flash %>
      <% flash.each do |message_name, message_value| %>
        <div class="flash <%= message_name.to_s %>">
          <p><%= "#{message_name}: #{message_value}" %></p>
        </div>
      <% end %>
    <% end %>
    <div id='header' class='pure-g pure-menu pure-menu-horizontal pure-menu-scrollable margin-bottom-1 shadow background-white'>
      <ul id='title-container' class='pure-u-1 pure-menu-list'>
        <li class='pure-menu-item'>
          <a href=<%= root_path %> class='pure-menu-link pure-menu-heading'>
            <p class='margin-auto site-title'>Graham Hemsley</p>
            <p class='subtitle lowercase margin-auto'>Photo Prints</p>
          </a>
        </li>
      </ul>
      <ul id='links-container' class='pure-u-1 pure-menu-list'>
        <% if admin_signed_in? && @admin %>
          <li class='pure-menu-item'>
            <%= link_to 'Sign out', admin_signout_path, class: 'pure-menu-link' %>
          </li>
          <li class='pure-menu-item'>
            <%= link_to 'Admin', admin_path(@admin), class: 'pure-menu-link' %>
          </li>
          <li class='pure-menu-item'>
            <%= link_to 'Users', users_path, class: 'pure-menu-link' %>
          </li>
          </li>
        <% end %>
        <% Category.all.each do |category| %>
          <li class='pure-menu-item'>
            <%= link_to category.name, category_path(category), class: 'pure-menu-link' %>
          </li>
        <% end %>
        <li class='pure-menu-item'>
          <%= form_with url: "/search", method: :get, class: 'pure-form pure-form margin-auto padding-0' do |form| %>
            <%= form.text_field :query, placeholder: 'Search' %>
          <% end %>
        </li>
        <li class='pure-menu-item'>
          <button class="snipcart-checkout button-cart pure-button button-success">
            <svg xmlns="http://www.w3.org/2000/svg"
                width="512px" height="512px" viewBox="0 0 512 512">
              <g>
                <path fill='white' d="M176.008,416c-26.5,0-48,21.469-48,48s21.5,48,48,48s48-21.469,48-48S202.508,416,176.008,416z"/>
                <path fill='white' d="M303.992,416c-26.516,0-47.984,21.469-47.984,48s21.469,48,47.984,48c26.563,0,48-21.469,48-48S330.555,416,303.992,416z"
                  />
                <path fill='white' d="M495.992,0h-80c-7.688,0-14.313,5.531-15.75,13.125L390.992,64H16.008c-5.344,0-10.344,2.688-13.313,7.125
                  S-0.82,81.219,1.242,86.156l80,192c2.484,5.969,8.313,9.844,14.766,9.844h254.297l-11.625,64H128.008c-8.844,0-16,7.156-16,16
                  s7.156,16,16,16h223.984c7.75,0,14.375-5.531,15.75-13.125L429.367,32h66.625c8.875,0,16-7.156,16-16S504.867,0,495.992,0z
                  M356.117,256H106.68L40.008,96H385.18L356.117,256z"/>
              </g>
            </svg>
            <span class='snipcart-items-count'>
          </button>
        </li>
        <li class='pure-menu-item'>
          <button class="snipcart-customer-signin pure-menu-link button-unstyle">My account</button>
        </li>
      </ul>
    </div>
    <div id='content' class='content pure-g'>
      <%= yield %>
    </div>
    <script async src="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js" ></script>
  </body>
</html>
